#: include kvfiles/commons.kv
#: import ButtonColor components.commons.ButtonColor
#: import OverDue components.commons.OverDue

<TaskInfoScreen>:
    id: task_info
    name: "task_info"
    MDFloatLayout:
        BackButton:
            id: back_button
            screen: root
            size_hint_x: .7
            pos_hint: {"center_x": .4, "center_y": .85}
        MDLabel:
            text: "About Task"
            theme_text_color: "Custom"
            text_color: "#ffffff"
            font_style: "Headline"
            role: "large"
            bold: True
            pos_hint: {"center_x": .65, "center_y": .945}


    MDBoxLayout:
        orientation: "vertical"
        spacing: "60dp"
        adaptive_height: True
        size_hint_x: .8
        pos_hint: {"center_x": .5, "top": .88}

        MDBoxLayout:
            orientation: "vertical"
            spacing: "45dp"
            adaptive_height: True

            MDLabel:
                text: "Title"
                theme_text_color: "Custom"
                text_color: "#ffffff"
                font_style: "Title"
                role: "large"
                bold: True

            MDLabel:
                text: root.task.title if root.task else ""
                theme_text_color: "Custom"
                text_color: "#ffffff"
                font_style: "Title"
                role: "large"

        MDBoxLayout:
            orientation: "vertical"
            spacing: "45dp"
            adaptive_height: True

            MDLabel:
                text: "Due Time"
                theme_text_color: "Custom"
                text_color: "#ffffff"
                font_style: "Title"
                role: "large"
                bold: True

            MDLabel:
                text: f"{root.task.date} {root.task.time}" if root.task else ""
                theme_text_color: "Custom"
                text_color: "#ffffff"
                font_style: "Title"
                role: "large"

        MDBoxLayout:
            orientation: "vertical"
            spacing: "0dp"
            adaptive_height: True

            MDLabel:
                text: "Progress"
                theme_text_color: "Custom"
                text_color: "#ffffff"
                font_style: "Title"
                role: "large"
                bold: True

            MDSlider:
                id: progress_field
                value: int(root.task.progress*100) if root.task else 0
                max: 100
                step: 1
                track_active_color : ButtonColor
                MDSliderHandle:
                    theme_bg_color: "Custom"
                    md_bg_color : ButtonColor

                MDSliderValueLabel:
                    color : ButtonColor

    MDButton:
        id: mark_complete
        style: "filled"
        pos_hint: {"center_x": .5, "center_y":.3}
        theme_width: "Custom"
        theme_height: "Custom"
        size_hint_x: .3
        size_hint_y: .04
        theme_bg_color: "Custom"
        on_release: root.update_progress() 
        md_bg_color: ButtonColor
        radius: 15

        MDButtonIcon:
            icon: "plus"

        MDButtonText:
            text: "UPDATE PROGRESS"
            theme_font_size: "Custom"
            theme_font_name: "Custom"
            font_name: "assets/Poppins/Poppins-Bold.ttf"
            pos_hint: {"center_x": .55, "center_y": .5}

    MDButton:
        id: mark_complete
        style: "filled"
        pos_hint: {"center_x": .5, "center_y":.25}
        theme_width: "Custom"
        theme_height: "Custom"
        size_hint_x: .3
        size_hint_y: .04
        theme_bg_color: "Custom"
        on_release: root.complete_task()
        md_bg_color: "lightgreen"
        radius: 15

        MDButtonIcon:
            icon: "checkbox-marked"

        MDButtonText:
            text: "COMPLETE TASK"
            theme_font_size: "Custom"
            theme_font_name: "Custom"
            font_name: "assets/Poppins/Poppins-Bold.ttf"
            pos_hint: {"center_x": .55, "center_y": .5}

    MDButton:
        id: mark_complete
        style: "filled"
        pos_hint: {"center_x": .5, "center_y":.13}
        theme_width: "Custom"
        theme_height: "Custom"
        size_hint_x: .3
        size_hint_y: .04
        theme_bg_color: "Custom"
        on_release: root.delete_task()
        md_bg_color: OverDue
        radius: 15

        MDButtonIcon:
            icon: "minus"

        MDButtonText:
            text: "DELETE TASK"
            theme_font_size: "Custom"
            theme_font_name: "Custom"
            font_name: "assets/Poppins/Poppins-Bold.ttf"
            pos_hint: {"center_x": .55, "center_y": .5}